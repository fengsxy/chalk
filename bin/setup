#!/usr/bin/env sh

# Set up Jekyll site. Run this script immediately after cloning the codebase.
# https://github.com/thoughtbot/guides/tree/master/protocol

# Exit if any subcommand fails
set -e

# Set up Ruby dependencies via Bundler.
gem install bundler --conservative
bundle check || bundle install

# Set up JS dependencies via Bower.
# Check if running in CI environment
if [ -n "$CI" ]; then
  echo "Running in CI environment, installing bower with sudo..."
  sudo npm install -g bower
else
  echo "Installing bower locally..."
  npm install -g bower
fi

bower install --allow-root